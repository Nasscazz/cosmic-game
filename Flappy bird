<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flappy Bird</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
        }
        
        body {
            overflow: hidden;
            background: #000;
            font-family: 'Arial Rounded MT Bold', 'Times New Roman', sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #gameContainer {
            position: relative;
            width: 100%;
            height: 100vh;
            max-width: 500px;
            max-height: 900px;
            margin: 0 auto;
            overflow: hidden;
            touch-action: none;
        }
        
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
        
        #menu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        #gameOver {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        #pauseMenu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        
        .menu-title {
            color: #ff6800;
            font-size: 3.5rem;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px #ff0;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .button {
            background: linear-gradient(45deg, #Fff64d, #2e32);
            color: wnite;
            border: none;
            padding: 1.2rem 2.5rem;
            margin: 0.8rem;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            width: 80%;
            max-width: 300px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .button:hover, .button:active {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
        
        .button:active {
            transform: translateY(-1px);
        }
        
        .score-display {
            font-size: 4rem;
            color: white;
            text-shadow: 0 0 10px #000;
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        
        .stats {
            background: rgba(0, 0, 0, 0.7);
            padding: 1.5rem;
            border-radius: 20px;
            margin: 1rem 0;
            width: 80%;
            max-width: 300px;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            color: white;
            margin: 0.5rem 0;
            font-size: 1.2rem;
        }
        
        .pause-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            z-index: 10;
            backdrop-filter: blur(5px);
        }
        
        @media (max-width: 500px) {
            .menu-title { font-size: 2.5rem; }
            .button { font-size: 1.2rem; padding: 1rem 2rem; }
            .score-display { font-size: 3rem; }
        }
        
        /* –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è */
        .instructions {
            color: white;
            text-align: center;
            margin-top: 1rem;
            font-size: 1rem;
            opacity: 0.8;
        }
        
        /* –¢–µ–Ω—å –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <!-- –°—á–µ—Ç –≤ –∏–≥—Ä–µ -->
        <div id="scoreDisplay" class="score-display" style="display: none;">0</div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–∞—É–∑—ã -->
        <button id="pauseButton" class="pause-button" style="display: none;">‚è∏Ô∏è</button>
        
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="menu">
            <h1 class="menu-title text-shadow">FLAPPY BIRD</h1>
              by nasscazz<h2></h2>
            <button id="playButton" class="button">–ò–ì–†–ê–¢–¨</button>
            
            <div class="stats">
                <div class="stat-row">
                    <span> –†–µ–∫–æ—Ä–¥:</span>
                    <span id="highScoreDisplay">0</span>
                </div>
                <div class="stat-row">
                    <span>–í—Å–µ–≥–æ –∏–≥—Ä:</span>
                    <span id="gamesPlayed">0</span>
                </div>
            </div>
            
            <div class="instructions">
                –ö–ê–°–ê–ù–ò–ï / –ü–†–û–ë–ï–õ - –≤–∑–º–∞—Ö<br>
                P - –ø–∞—É–∑–∞
            </div>
        </div>
        
        <!-- –ú–µ–Ω—é –ø–∞—É–∑—ã -->
        <div id="pauseMenu">
            <h1 class="menu-title text
              -shadow">–ü–ê–£–ó–ê</h1>
            <button id="resumeButton" class="button">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
            <button id="restartButton" class="button">–ó–ê–ù–û–í–û</button>
            <button id="menuButton" class="button">–í –ú–ï–ù–Æ</button>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω Game Over -->
        <div id="gameOver">
            <h1 class="menu-title text-shadow">–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h1>
            <div class="score-display text-shadow" id="finalScore">0</div>
            <div class="stats">
                <div class="stat-row">
                    <span>üèÜ –†–µ–∫–æ—Ä–¥:</span>
                    <span id="gameOverHighScore">0</span>
                </div>
            </div>
            <button id="playAgainButton" class="button">–ï–©–Å –†–ê–ó</button>
            <button id="gameOverMenuButton" class="button">–ú–ï–ù–Æ</button>
        </div>
    </div>

    <script>
        class FlappyBirdGame {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.screenWidth = window.innerWidth;
                this.screenHeight = window.innerHeight;
                this.canvas.width = this.screenWidth;
                this.canvas.height = this.screenHeight;
                
                // –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
                this.GAME_STATE = {
                    MENU: 0,
                    PLAYING: 1,
                    PAUSED: 2,
                    GAME_OVER: 3
                };
                this.state = this.GAME_STATE.MENU;
                
                // –ò–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
                this.bird = null;
                this.pipes = [];
                this.clouds = [];
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                this.stats = {
                    score: 0,
                    highScore: parseInt(localStorage.getItem('flappyHighScore')) || 0,
                    gamesPlayed: parseInt(localStorage.getItem('flappyGamesPlayed')) || 0
                };
                
                // –§–∏–∑–∏–∫–∞
                this.gravity = 0.5;
                this.flapStrength = -8;
                this.pipeSpeed = 3;
                this.pipeGap = 200;
                this.pipeWidth = 80;
                this.groundHeight = 80;
                
                // –¢–∞–π–º–µ—Ä—ã
                this.lastPipeTime = 0;
                this.pipeInterval = 2000; // ms
                
                // –ê–Ω–∏–º–∞—Ü–∏—è
                this.lastTime = 0;
                this.fps = 60;
                this.fpsInterval = 1000 / this.fps;
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
                this.init();
                this.setupEventListeners();
                this.createClouds(6);
                this.gameLoop();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                this.updateUI();
            }
            
            init() {
                this.resizeCanvas();
                window.addEventListener('resize', () => this.resizeCanvas());
            }
            
            resizeCanvas() {
                this.screenWidth = window.innerWidth;
                this.screenHeight = window.innerHeight;
                this.canvas.width = this.screenWidth;
                this.canvas.height = this.screenHeight;
                this.groundHeight = Math.min(80, this.screenHeight * 0.1);
            }
            
            createClouds(count) {
                for (let i = 0; i < count; i++) {
                    this.clouds.push({
                        x: Math.random() * this.screenWidth,
                        y: Math.random() * (this.screenHeight * 0.4),
                        width: 40 + Math.random() * 40,
                        height: 20 + Math.random() * 20,
                        speed: 0.1 + Math.random() * 0.2,
                        opacity: 0.3 + Math.random() * 0.4
                    });
                }
            }
            
            startGame() {
                this.state = this.GAME_STATE.PLAYING;
                this.stats.score = 0;
                this.pipes = [];
                this.lastPipeTime = Date.now();
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ç–∏—á–∫–∏
                this.bird = {
                    x: this.screenWidth * 0.25,
                    y: this.screenHeight / 2,
                    width: 40,
                    height: 40,
                    velocity: 0,
                    angle: 0,
                    wingAngle: 0,
                    wingDirection: 1
                };
                
                // –ü–æ–∫–∞–∑–∞—Ç—å –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                document.getElementById('scoreDisplay').style.display = 'block';
                document.getElementById('scoreDisplay').textContent = '0';
                document.getElementById('pauseButton').style.display = 'block';
                
                // –°–∫—Ä—ã—Ç—å –º–µ–Ω—é
                document.getElementById('menu').style.display = 'none';
                document.getElementById('gameOver').style.display = 'none';
            }
            
            gameLoop(currentTime = 0) {
                requestAnimationFrame((time) => this.gameLoop(time));
                
                // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ FPS
                const deltaTime = currentTime - this.lastTime;
                if (deltaTime < this.fpsInterval) return;
                
                this.lastTime = currentTime - (deltaTime % this.fpsInterval);
                
                // –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞
                this.ctx.clearRect(0, 0, this.screenWidth, this.screenHeight);
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
                this.drawBackground();
                
                if (this.state === this.GAME_STATE.PLAYING) {
                    this.updateGame();
                    this.drawGame();
                } else if (this.state === this.GAME_STATE.PAUSED) {
                    this.drawGame();
                    this.drawPauseOverlay();
                }
            }
            
            drawBackground() {
                // –ù–µ–±–æ
                const gradient = this.ctx.createLinearGradient(0, 0, 0, this.screenHeight);
                gradient.addColorStop(0, '#87CEEB');
                gradient.addColorStop(1, '#E0F7FF');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.screenWidth, this.screenHeight);
                
                // –°–æ–ª–Ω—Ü–µ
                this.ctx.fillStyle = '#FFD700';
                this.ctx.beginPath();
                this.ctx.arc(this.screenWidth - 70, 60, 30, 0, Math.PI * 7);
                this.ctx.fill();
                
                // –û–±–ª–∞–∫–∞
                this.clouds.forEach(cloud => {
                    cloud.x -= cloud.speed;
                    if (cloud.x < -cloud.width) {
                        cloud.x = this.screenWidth + 50;
                        cloud.y = Math.random() * (this.screenHeight * 0.4);
                    }
                    
                    this.ctx.save();
                    this.ctx.globalAlpha = cloud.opacity;
                    this.ctx.fillStyle = 'white';
                    
                    // –†–∏—Å—É–µ–º –æ–±–ª–∞–∫–æ
                    this.ctx.beginPath();
                    this.ctx.arc(cloud.x, cloud.y, cloud.height/2, 0, Math.PI * 2);
                    this.ctx.arc(cloud.x + cloud.width/3, cloud.y - cloud.height/3, cloud.height/2, 0, Math.PI * 2);
                    this.ctx.arc(cloud.x + cloud.width/2, cloud.y, cloud.height/2, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    this.ctx.restore();
                });
            }
            
            updateGame() {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ç–∏—á–∫–∏
                this.bird.velocity += this.gravity;
                this.bird.y += this.bird.velocity;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–≥–ª–∞
                this.bird.angle = Math.max(-30, Math.min(90, this.bird.velocity * 3));
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –∫—Ä—ã–ª—å–µ–≤
                this.bird.wingAngle += this.bird.wingDirection * 0.2;
                if (Math.abs(this.bird.wingAngle) > 10) {
                    this.bird.wingDirection *= -1;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü
                if (this.bird.y < 0) {
                    this.bird.y = 0;
                    this.bird.velocity = 0;
                }
                
                if (this.bird.y > this.screenHeight - this.groundHeight - this.bird.height) {
                    this.gameOver();
                    return;
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä—É–±
                const currentTime = Date.now();
                if (currentTime - this.lastPipeTime > this.pipeInterval) {
                    this.addPipe();
                    this.lastPipeTime = currentTime;
                }
                
                // –î–≤–∏–∂–µ–Ω–∏–µ —Ç—Ä—É–±
                for (let i = this.pipes.length - 1; i >= 0; i--) {
                    const pipe = this.pipes[i];
                    pipe.x -= this.pipeSpeed;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
                    if (this.checkCollision(pipe)) {
                        this.gameOver();
                        return;
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
                    if (!pipe.passed && pipe.x + pipe.width < this.bird.x) {
                        pipe.passed = true;
                        this.stats.score++;
                        
                        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
                        document.getElementById('scoreDisplay').textContent = this.stats.score;
                        
                        // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 5 –æ—á–∫–æ–≤
                        if (this.stats.score % 5 === 0) {
                            this.pipeSpeed += 0.1;
                        }
                    }
                    
                    // –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä—É–± –∑–∞ —ç–∫—Ä–∞–Ω–æ–º
                    if (pipe.x < -pipe.width) {
                        this.pipes.splice(i, 1);
                    }
                }
            }
            
            addPipe() {
                const minHeight = 80;
                const maxHeight = this.screenHeight - this.groundHeight - this.pipeGap - 80;
                const topHeight = Math.random() * (maxHeight - minHeight) + minHeight;
                
                const pipe = {
                    x: this.screenWidth,
                    width: this.pipeWidth,
                    topHeight: topHeight,
                    bottomY: topHeight + this.pipeGap,
                    passed: false
                };
                
                this.pipes.push(pipe);
            }
            
            checkCollision(pipe) {
                // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∞—è –∫–æ–ª–ª–∏–∑–∏—è
                const birdLeft = this.bird.x - this.bird.width/2;
                const birdRight = this.bird.x + this.bird.width/2;
                const birdTop = this.bird.y - this.bird.height/2;
                const birdBottom = this.bird.y + this.bird.height/2;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Ö–Ω–µ–π —Ç—Ä—É–±—ã
                if (birdRight > pipe.x && 
                    birdLeft < pipe.x + pipe.width && 
                    birdTop < pipe.topHeight) {
                    return true;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∂–Ω–µ–π —Ç—Ä—É–±—ã
                if (birdRight > pipe.x && 
                    birdLeft < pipe.x + pipe.width && 
                    birdBottom > pipe.bottomY) {
                    return true;
                }
                
                return false;
            }
            
            drawGame() {
                // –†–∏—Å—É–µ–º —Ç—Ä—É–±—ã
                this.pipes.forEach(pipe => {
                    // –í–µ—Ä—Ö–Ω—è—è —Ç—Ä—É–±–∞
                    this.ctx.fillStyle = '#4CAF50';
                    this.ctx.fillRect(pipe.x, 0, pipe.width, pipe.topHeight);
                    
                    // –ù–∏–∂–Ω—è—è —Ç—Ä—É–±–∞
                    this.ctx.fillRect(pipe.x, pipe.bottomY, pipe.width, this.screenHeight - pipe.bottomY);
                    
                    // –ö–æ–ª–ø–∞—á–∫–∏ —Ç—Ä—É–±
                    this.ctx.fillStyle = '#3647NC';
                    this.ctx.fillRect(pipe.x - 3, pipe.topHeight - 15, pipe.width + 6, 15);
                    this.ctx.fillRect(pipe.x - 3, pipe.bottomY, pipe.width + 6, 15);
                });
                
                // –†–∏—Å—É–µ–º –ø—Ç–∏—á–∫—É
                this.ctx.save();
                this.ctx.translate(this.bird.x, this.bird.y);
                this.ctx.rotate(this.bird.angle * Math.PI / 180);
                
                // –¢–µ–ª–æ –ø—Ç–∏—á–∫–∏
                this.ctx.fillStyle = '#FFEB3B';
                this.ctx.beginPath();
                this.ctx.ellipse(0, 0, this.bird.width/2, this.bird.height/2, 0, 0, Math.PI * 2);
                this.ctx.fill();
                
                // –û–±–≤–æ–¥–∫–∞ —Ç–µ–ª–∞
                this.ctx.strokeStyle = '#000';
                this.ctx.lineWidth = 1;
                this.ctx.stroke();
                
                // –ì–ª–∞–∑
                this.ctx.fillStyle = 'white';
                this.ctx.beginPath();
                this.ctx.arc(8, -5, 6, 0, Math.PI * 2);
                this.ctx.fill();
                
                this.ctx.fillStyle = 'black';
                this.ctx.beginPath();
                this.ctx.arc(10, -5, 3, 0, Math.PI * 2);
                this.ctx.fill();
                
                // –ö–ª—é–≤
                this.ctx.fillStyle = '#FF9800';
                this.ctx.beginPath();
                this.ctx.moveTo(12, 4);
                this.ctx.lineTo(30, -5);
                this.ctx.lineTo(27, 3);
                this.ctx.closePath();
                this.ctx.fill();
                
                // –ö—Ä—ã–ª–æ
                this.ctx.save();
                this.ctx.rotate(this.bird.wingAngle * Math.PI / 180);
                this.ctx.fillStyle = '#FBC02D';
                this.ctx.beginPath();
                this.ctx.ellipse(-13, 3, 12, 8, 0, 0, Math.PI * 2);
                this.ctx.fill();
                this.ctx.restore();
                
                this.ctx.restore();
                
                // –ó–µ–º–ª—è
                this.ctx.fillStyle = '#8BC34A';
                this.ctx.fillRect(0, this.screenHeight - this.groundHeight, this.screenWidth, this.groundHeight);
                
                // –¢—Ä–∞–≤–∞
                this.ctx.fillStyle = '#7CB342';
                for (let i = 0; i < this.screenWidth; i += 12) {
                    const height = 3 + Math.sin(i * 0.1) * 2;
                    this.ctx.fillRect(i, this.screenHeight - this.groundHeight - height, 4, height);
                }
            }
            
            drawPauseOverlay() {
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                this.ctx.fillRect(0, 0, this.screenWidth, this.screenHeight);
                
                this.ctx.fillStyle = 'white';
                this.ctx.font = 'bold 48px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.textBaseline = 'middle';
                this.ctx.fillText('–ü–ê–£–ó–ê', this.screenWidth / 2, this.screenHeight / 2);
            }
            
            gameOver() {
                this.state = this.GAME_STATE.GAME_OVER;
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ—Ä–¥–∞
                if (this.stats.score > this.stats.highScore) {
                    this.stats.highScore = this.stats.score;
                    localStorage.setItem('flappyHighScore', this.stats.highScore);
                }
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                this.stats.gamesPlayed++;
                localStorage.setItem('flappyGamesPlayed', this.stats.gamesPlayed);
                
                // –°–∫—Ä—ã—Ç—å –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                document.getElementById('scoreDisplay').style.display = 'none';
                document.getElementById('pauseButton').style.display = 'none';
                
                // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω Game Over
                document.getElementById('gameOver').style.display = 'flex';
                document.getElementById('finalScore').textContent = this.stats.score;
                document.getElementById('gameOverHighScore').textContent = this.stats.highScore;
            }
            
            flap() {
                if (this.state === this.GAME_STATE.PLAYING) {
                    this.bird.velocity = this.flapStrength;
                }
            }
            
            updateUI() {
                document.getElementById('highScoreDisplay').textContent = this.stats.highScore;
                document.getElementById('gamesPlayed').textContent = this.stats.gamesPlayed;
            }
            
            setupEventListeners() {
                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å–∞–Ω–∏–µ–º
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    if (this.state === this.GAME_STATE.PLAYING) {
                        this.flap();
                    } else if (this.state === this.GAME_STATE.MENU) {
                        this.startGame();
                    }
                });
                
                this.canvas.addEventListener('click', () => {
                    if (this.state === this.GAME_STATE.PLAYING) {
                        this.flap();
                    } else if (this.state === this.GAME_STATE.MENU) {
                        this.startGame();
                    }
                });
                
                // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
                document.addEventListener('keydown', (e) => {
                    if (e.code === 'Space' || e.code === 'ArrowUp') {
                        e.preventDefault();
                        if (this.state === this.GAME_STATE.PLAYING) {
                            this.flap();
                        } else if (this.state === this.GAME_STATE.MENU) {
                            this.startGame();
                        }
                    } else if (e.code === 'Escape' || e.code === 'KeyP') {
                        this.togglePause();
                    } else if (e.code === 'KeyR' && this.state === this.GAME_STATE.GAME_OVER) {
                        this.startGame();
                    } else if (e.code === 'KeyM') {
                        this.showMenu();
                    }
                });
                
                // –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                document.getElementById('playButton').addEventListener('click', () => this.startGame());
                document.getElementById('playAgainButton').addEventListener('click', () => this.startGame());
                document.getElementById('resumeButton').addEventListener('click', () => this.resumeGame());
                document.getElementById('restartButton').addEventListener('click', () => this.startGame());
                document.getElementById('menuButton').addEventListener('click', () => this.showMenu());
                document.getElementById('gameOverMenuButton').addEventListener('click', () => this.showMenu());
                document.getElementById('pauseButton').addEventListener('click', () => this.togglePause());
            }
            
            togglePause() {
                if (this.state === this.GAME_STATE.PLAYING) {
                    this.state = this.GAME_STATE.PAUSED;
                    document.getElementById('pauseMenu').style.display = 'flex';
                } else if (this.state === this.GAME_STATE.PAUSED) {
                    this.resumeGame();
                }
            }
            
            resumeGame() {
                this.state = this.GAME_STATE.PLAYING;
                document.getElementById('pauseMenu').style.display = 'none';
            }
            
            showMenu() {
                this.state = this.GAME_STATE.MENU;
                document.getElementById('menu').style.display = 'flex';
                document.getElementById('pauseMenu').style.display = 'none';
                document.getElementById('gameOver').style.display = 'none';
                document.getElementById('scoreDisplay').style.display = 'none';
                document.getElementById('pauseButton').style.display = 'none';
                this.updateUI();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            new FlappyBirdGame();
        });
    </script>
</body>
</html>
